@{
    Layout = null;
    GestionAgroite_V1_CSI.Models.Ubicacion oUbicacion = ViewBag.Ubicacion;
    GestionAgroite_V1_CSI.Models.Agricultor oAgricultor = ViewBag.Agricultor;
    GestionAgroite_V1_CSI.Models.Pedido oPedido = ViewBag.Pedido;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Layout</title>

    <link href="~/recursos/vendor/nucleo/css/nucleo.css" rel="stylesheet" />

    <!------>
    <link href="~/recursos/css/argon.css?v=1.2.0" rel="stylesheet" />
    <link href="~/recursos/vendor/fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet" />
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0d6Qz_m5wpj0lnCziyu985dtUNeaDFc0&callback=initMap"
            type="text/javascript"></script>
    <script type="text/javascript" src="~/recursos/js/jquery-3.5.1.min.js"></script>

</head>
<body>
    <!-- Sidenav -->
    <nav class="sidenav navbar navbar-vertical  fixed-left  navbar-expand-xs navbar-light bg-white" id="sidenav-main" style="position:fixed">
        <div class="scrollbar-inner">
            <!-- Brand -->
            <div class="sidenav-header  align-items-center" style="padding-top:10px;">
                <img src="~/Recursos/imagen/logo-removebg-preview.png" width="150" height="150" alt="...">
            </div>
            <div class="navbar-inner">
                <!-- Collapse -->
                <div class="collapse navbar-collapse" id="sidenav-collapse-main">
                    <!-- Divider -->
                    <hr class="my-3">
                    <!-- Heading -->
                    <h6 class="navbar-heading p-0 text-muted">
                        <span class="docs-normal">USUARIOS</span>
                    </h6>
                    <!-- Nav items -->
                    <ul class="navbar-nav">

                        <li class="nav-item">
                            <a class="nav-link " href="~/Agricultor/Index">
                                <img src="~/Recursos/imagen/icons8_tractor_32px_2.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Agricultores</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="~/Usuario/Index">
                                <img src="~/Recursos/imagen/icons8_pay_30px.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Usuarios</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="~/Asociacion/Index">
                                <img src="~/Recursos/imagen/icons8_user_groups_50px_1.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Asociacion</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="~/Actividad/Index">
                                <img src="~/Recursos/imagen/icons8_move_stock_30px.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Actividad</span>
                            </a>
                        </li>
                    </ul>
                    <!-- Divider -->
                    <hr class="my-3">
                    <!-- Heading -->
                    <h6 class="navbar-heading p-0 text-muted">
                        <span class="docs-normal">Producto</span>
                    </h6>
                    <!-- Navigation -->
                    <ul class="navbar-nav mb-md-3">
                        <li class="nav-item">
                            <a class="nav-link" href="~/Producto/Index">
                                <img src="~/Recursos/imagen/icons8_exclusive_product_30px_2.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Productos</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="~/Categoria/Index">
                                <img src="~/Recursos/imagen/icons8_sorting_32px_2.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Categoria</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="~/Frecuencia/Index">

                                <img src="~/Recursos/imagen/icons8_timetable_50px.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Frecuencia</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="~/UnidadVolumen/Index">
                                <img src="~/Recursos/imagen/icons8_pressure_32px_2.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Unidad de Volumen</span>
                            </a>
                        </li>
                    </ul>

                    <!-- Divider -->
                    <hr class="my-3">
                    <!-- Heading -->
                    <h6 class="navbar-heading p-0 text-muted">
                        <span class="docs-normal">Trasporte</span>
                    </h6>
                    <!-- Nav items -->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link " href="~/Vehiculos/Index">
                                <img src="~/Recursos/imagen/icons8_truck_length_32px_2.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Vehiculo</span>
                            </a>
                        </li>
                    </ul>
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link " href="~/Transportador/Index">
                                <img src="~/Recursos/imagen/icons8_driver_80px.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Trasportista</span>
                            </a>
                        </li>
                    </ul>
                    <!-- Divider -->
                    <hr class="my-3">
                    <!-- Heading -->
                    <h6 class="navbar-heading p-0 text-muted">
                        <span class="docs-normal">Compra</span>
                    </h6>
                    <!-- Nav items -->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link " href="~/Compra/Index">
                                <img src="~/Recursos/imagen/icons8_buy_30px_2.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Compra</span>
                            </a>
                        </li>
                    </ul>
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link " href="~/Pago/Index">
                                <img src="~/Recursos/imagen/icons8_pay_24px.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Pagos</span>
                            </a>
                        </li>
                    </ul>
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link " href="~/Pedido/Index">
                                <img src="~/Recursos/imagen/icons8_e-commerce_30px_4.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Pedidos</span>
                            </a>
                        </li>
                    </ul>
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link " href="~/Entrega/Index">
                                <img src="~/Recursos/imagen/icons8_deliver_food_26px_1.png" width="20" height="20" style="margin-right:10px;">
                                <span class="nav-link-text">Entrega</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- Main content -->
    <div class="main-content" id="panel">
        <!-- Topnav -->
        <nav class="navbar navbar-top navbar-expand navbar-dark border-bottom bg-succes">
            <div class="container-fluid">
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <!-- Navbar links -->
                    <ul class="navbar-nav align-items-center  ml-md-auto ">
                        <li class="nav-item d-xl-none">
                            <!-- Sidenav toggler -->
                            <div class="pr-3 sidenav-toggler sidenav-toggler-dark" data-action="sidenav-pin" data-target="#sidenav-main">
                                <div class="sidenav-toggler-inner">
                                    <i class="sidenav-toggler-line"></i>
                                    <i class="sidenav-toggler-line"></i>
                                    <i class="sidenav-toggler-line"></i>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
                        <li class="nav-item dropdown">
                            <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <div class="media align-items-center">
                                    <span class="avatar avatar-sm rounded-circle">

                                    </span>
                                    <div class="media-body  ml-2  d-none d-lg-block">

                                        @if (Session["idusuario"] != null)
                                        {
                                            <span class="mb-0  text-success font-weight-bold"> @Session["nombre"]    </span>
                                        }
                                        else
                                        {
                                            <span class="mb-0  text-success font-weight-bold">User Null   </span>
                                        }
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-menu  dropdown-menu-right ">
                                <div class="dropdown-header noti-title">
                                    <h6 class="text-overflow m-0">¡Bienvenido!</h6>
                                </div>
                                <a href="#!" class="dropdown-item">
                                    <img src="~/recursos/imagen/user.png" width="20" height="20" style="margin-right:10px;">
                                    <span>Mi perfil</span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="~/Login/LogOut" class="dropdown-item">
                                    <img src="~/recursos/imagen/signout.png" width="20" height="20" style="margin-right:10px;">
                                    <span>Cerrar Sesión</span>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Header -->
        <div class="container">
            <div class="form-group">
                <a href="~/Compra/Realizarcompra/?idpedido=@oPedido.IdPedido" class="btn btn-default">Ir a Realizar Compra</a>
            </div>
            <input type="text" id="latagricultor" value="@oUbicacion.latitud" hidden />
            <input type="text" id="lngagricultor" value="@oUbicacion.longitud" hidden />
            <input type="text" id="latpedido" value="@oPedido.Latitud" hidden />
            <input type="text" id="lngpedido" value="@oPedido.Longitud" hidden />
            <div id="map" style="width: 700px;height: 400px;"><h1>Hola</h1></div>
        </div>

    </div>
    <script type="text/javascript">
        var map;
        var america_lat = -18.026149;
        var america_lng = -70.2533308;

        var directionsDisplay;
        var directionsService;

        function initMap() {
            directionsDisplay = new google.maps.DirectionsRenderer({ polylineOptions: { strokeColor: '#2E9AFE' } });
            directionsService = new google.maps.DirectionsService();
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: america_lat, lng: america_lng },
                zoom: 14,
            });
            
            draw_rute_map();
        }
        var latagricultor = $("#latagricultor").val();
        var lngagricultor = $("#lngagricultor").val();
        var latpedido = $("#latpedido").val();
        var lngpedido = $("#lngpedido").val();
        console.log(latagricultor + "====" + latpedido + "====" + lngpedido + "====" + lngagricultor);
        function draw_rute_map() {
            var start = new google.maps.LatLng(latagricultor, lngagricultor);
            var end = new google.maps.LatLng(latpedido, lngpedido);
            var request = {
                origin: start,
                destination: end,
                travelMode: google.maps.TravelMode.DRIVING
            };
            directionsService.route(request, function (response, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                    directionsDisplay.setMap(map);
                    directionsDisplay.setOptions({ suppressMarkers: false });
                }
            });
        }
    </script>


</body>
</html>